name: ripples
version: "1"
summary: Ripples game
description: Make ripples by touching and clicking
confinement: strict

apps:
  ripples:
    command: bin/ripples
    plugs:
     - opengl
     - wayland

plugs: 
   wayland-socket-dir:
     content: wayland-socket-dir
     interface: content
     target: $SNAP_DATA/wayland
     default-provider: mir-kiosk:wayland-socket-dir

parts:
  ripples:
    plugin: cmake
    source: https://github.com/knitzsche/ripples
    source-type: git
    build-packages:
      - build-essential
      - cmake
      - g++
      - libgles2-mesa-dev
      - pkg-config
      - libsdl2-dev
      - libsdl2-gfx-dev
    stage-packages:
      - libsdl2-2.0-0
      - libsdl2-gfx-1.0-0
      - libdrm2
      - libegl1-mesa
      - libgles2-mesa
      - libgl1-mesa-glx
      - libpulse0
environment:
  LD_LIBRARY_PATH: $SNAP/usr/lib/arm-linux-gnueabihf/pulseaudio/
  XDG_RUNTIME_DIR: $SNAP_DATA/waylan
#    plugin: dump
#    organize:
#      ripples.wrapper: bin/ripplesrun
